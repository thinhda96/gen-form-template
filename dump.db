-- MySQL dump 10.13  Distrib 8.0.27, for macos11.6 (x86_64)
--
-- Host: dop-release-vn-mariadb.trustingsocial.com    Database: digital_journey
-- ------------------------------------------------------
-- Server version	5.5.5-10.3.31-MariaDB-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `annual_incomes`
--

DROP TABLE IF EXISTS `annual_incomes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `annual_incomes` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `id_value` varchar(31) NOT NULL DEFAULT '',
  `request_id` bigint(20) NOT NULL DEFAULT 0,
  `pit_number` varchar(63) NOT NULL DEFAULT '',
  `full_name` varchar(255) NOT NULL DEFAULT '',
  `date_of_birth` varchar(31) NOT NULL DEFAULT '',
  `gender` varchar(31) NOT NULL DEFAULT '',
  `province` varchar(127) NOT NULL DEFAULT '',
  `company_tax_id` varchar(63) NOT NULL DEFAULT '',
  `company_name` varchar(255) NOT NULL DEFAULT '',
  `income_type` varchar(63) NOT NULL DEFAULT '',
  `total_income` float NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `income_year` int(11) NOT NULL DEFAULT 2019,
  `month_of_work` int(11) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `idx_application_id` (`application_id`),
  KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=6285 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `application_documents`
--

DROP TABLE IF EXISTS `application_documents`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `application_documents` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `type` varchar(255) NOT NULL DEFAULT '',
  `parent_type` varchar(255) NOT NULL DEFAULT '',
  `document_id` varchar(63) NOT NULL DEFAULT '',
  `document_url` varchar(2047) NOT NULL DEFAULT '',
  `file_extension` varchar(63) NOT NULL DEFAULT '',
  `file_name` varchar(511) NOT NULL DEFAULT '',
  `order` int(11) NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `file_size` int(11) NOT NULL DEFAULT 0,
  `scope` varchar(63) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `fk_application_documents_applications1_idx` (`application_id`),
  KEY `apdoc_type_idx` (`type`),
  KEY `apdoc_document_id_idx` (`document_id`),
  CONSTRAINT `fk_application_documents_applications1` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=32306 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `application_evaluations`
--

DROP TABLE IF EXISTS `application_evaluations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `application_evaluations` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `state` varchar(63) NOT NULL DEFAULT '',
  `tree_uuid` varchar(63) NOT NULL DEFAULT '',
  `evaluation_path` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `application_matrix` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `output` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `score` float NOT NULL DEFAULT 0,
  `type` varchar(31) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `idx_application_id` (`application_id`)
) ENGINE=InnoDB AUTO_INCREMENT=53152 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `application_metadata`
--

DROP TABLE IF EXISTS `application_metadata`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `application_metadata` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `type` varchar(45) NOT NULL DEFAULT '',
  `name` varchar(2000) NOT NULL DEFAULT '',
  `lender_code` varchar(45) DEFAULT NULL,
  `code` varchar(45) DEFAULT NULL,
  `parent_type` varchar(45) DEFAULT NULL,
  `parent_code` varchar(45) DEFAULT NULL,
  `uniform` varchar(250) NOT NULL DEFAULT '',
  `level` varchar(45) NOT NULL DEFAULT '',
  `weight` int(11) NOT NULL DEFAULT 0,
  `public_code` varchar(63) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `idx_application_id` (`application_id`),
  KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=25363 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `application_promotions`
--

DROP TABLE IF EXISTS `application_promotions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `application_promotions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `description` varchar(511) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `idx_application_id` (`application_id`),
  KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1228 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `application_services`
--

DROP TABLE IF EXISTS `application_services`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `application_services` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `service_name` varchar(31) NOT NULL DEFAULT '',
  `status` varchar(31) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `dispatched_id` varchar(255) NOT NULL DEFAULT '',
  `dispatched_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `result_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `input_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `raw_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_application_id` (`application_id`)
) ENGINE=InnoDB AUTO_INCREMENT=75421 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `applications`
--

DROP TABLE IF EXISTS `applications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `applications` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `user_id` bigint(20) NOT NULL,
  `lender_id` bigint(20) NOT NULL,
  `lender_config_id` bigint(20) NOT NULL,
  `state` varchar(31) NOT NULL DEFAULT '',
  `status` varchar(31) NOT NULL DEFAULT '',
  `lead_id` bigint(20) NOT NULL DEFAULT 0,
  `lead_unique_token` varchar(63) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `lead_phone_number` varchar(25) NOT NULL DEFAULT '',
  `lead_client_code` varchar(63) NOT NULL DEFAULT '',
  `lead_product_code` varchar(31) NOT NULL DEFAULT '',
  `lead_product_type` varchar(31) NOT NULL DEFAULT '',
  `lead_telco_code` varchar(31) NOT NULL DEFAULT '',
  `lead_score` varchar(31) NOT NULL DEFAULT '',
  `lead_source` varchar(63) NOT NULL DEFAULT '',
  `lead_collected_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `lead_created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `lead_expired_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `lender_lead_id` varchar(63) NOT NULL DEFAULT '',
  `otp_request_id` bigint(20) NOT NULL DEFAULT 0,
  `otp_created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `otp_expired_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `form_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `form_step` varchar(31) NOT NULL DEFAULT '',
  `documents` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `log` text NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `ui_flow` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `ui_flow_settings` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `state_info` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `last_appraised_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `state_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `status_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `data_source` varchar(31) NOT NULL DEFAULT '',
  `created_by` varchar(63) NOT NULL DEFAULT '',
  `locked_at` timestamp NULL DEFAULT NULL,
  `lock_expired_at` timestamp NULL DEFAULT NULL,
  `lock_reason` varchar(63) NOT NULL DEFAULT '',
  `lock_state` varchar(31) NOT NULL DEFAULT '',
  `id_number` varchar(31) NOT NULL DEFAULT '',
  `other_id_number` varchar(31) NOT NULL DEFAULT '',
  `lead_distributor` varchar(63) NOT NULL DEFAULT '',
  `form_version` int(11) NOT NULL DEFAULT 0,
  `flow_selected_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `campaign_code` varchar(63) NOT NULL DEFAULT '',
  `customer_type` varchar(63) NOT NULL DEFAULT '',
  `deleted_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_unique_token_and_lender` (`lead_unique_token`,`lender_id`),
  KEY `fk_applications_lenders_idx` (`lender_id`),
  KEY `fk_applications_lender_config` (`lender_config_id`),
  KEY `idx_application_created_at_lender_id` (`created_at`,`lender_id`),
  KEY `idx_applications_state_at` (`state_at`),
  KEY `idx_lead_expired_at` (`lead_expired_at`),
  KEY `idx_phone_number` (`lead_phone_number`),
  KEY `idx_lender_lead_id` (`lender_lead_id`),
  KEY `idx_lock_expired_at` (`lock_expired_at`),
  KEY `idx_id_number` (`id_number`),
  KEY `idx_other_id_number` (`other_id_number`),
  CONSTRAINT `fk_applications_lender_config` FOREIGN KEY (`lender_config_id`) REFERENCES `lender_configs` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_applications_lenders` FOREIGN KEY (`lender_id`) REFERENCES `lenders` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=25023 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `bank_accounts`
--

DROP TABLE IF EXISTS `bank_accounts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `bank_accounts` (
  `id` bigint(64) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(64) NOT NULL,
  `account_number` varchar(63) NOT NULL DEFAULT '',
  `links` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `account_status` varchar(63) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `aml_status` varchar(63) NOT NULL DEFAULT 'passed',
  PRIMARY KEY (`id`),
  KEY `fk_bank_account_application_id_idx` (`application_id`),
  CONSTRAINT `fk_bank_accounts_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=1472 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `browsers`
--

DROP TABLE IF EXISTS `browsers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `browsers` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `lender` varchar(63) NOT NULL DEFAULT '0',
  `token` varchar(63) NOT NULL DEFAULT '',
  `user_id` varchar(127) NOT NULL DEFAULT '',
  `user_agent` varchar(511) NOT NULL DEFAULT '',
  `remote_address` varchar(511) NOT NULL DEFAULT '',
  `action_name` varchar(63) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `idx_lender_token` (`lender`,`token`),
  KEY `idx_token` (`token`),
  KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=224235 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `campaigns`
--

DROP TABLE IF EXISTS `campaigns`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `campaigns` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `lender_id` bigint(20) NOT NULL,
  `campaign_code` varchar(63) NOT NULL DEFAULT '',
  `campaign_type` varchar(31) NOT NULL,
  `product_code` varchar(63) NOT NULL DEFAULT '',
  `product_type` varchar(63) NOT NULL DEFAULT '',
  `source` varchar(63) NOT NULL DEFAULT '',
  `active` tinyint(1) NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `challenge_type` varchar(31) DEFAULT '',
  `ui_flow` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `redirect_type` varchar(63) DEFAULT '',
  `weight` int(11) NOT NULL DEFAULT 0,
  `partner_code` varchar(63) NOT NULL DEFAULT '',
  `partner_name` varchar(63) NOT NULL DEFAULT '',
  `ui_version` varchar(31) NOT NULL DEFAULT '',
  `partner_callback` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `product_sub_type` varchar(63) NOT NULL DEFAULT '',
  `must_match` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_unique_campaign_key` (`campaign_code`,`lender_id`),
  KEY `fk_idx_campaign_lenders` (`lender_id`),
  CONSTRAINT `fk_campaign_lenders` FOREIGN KEY (`lender_id`) REFERENCES `lenders` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=27 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `change_histories`
--

DROP TABLE IF EXISTS `change_histories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `change_histories` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `user_name` varchar(63) NOT NULL DEFAULT '',
  `action_name` varchar(63) NOT NULL DEFAULT '',
  `table_name` varchar(127) NOT NULL DEFAULT '',
  `record_id` bigint(20) NOT NULL DEFAULT 0,
  `current_value` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `parameters` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `actor` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2078 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cic_requests`
--

DROP TABLE IF EXISTS `cic_requests`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `cic_requests` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `status` varchar(31) NOT NULL DEFAULT '',
  `request_id` bigint(20) NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `customer_name` varchar(255) NOT NULL DEFAULT '',
  `address` varchar(255) NOT NULL DEFAULT '',
  `id_type` varchar(31) NOT NULL DEFAULT '',
  `id_value` varchar(31) NOT NULL DEFAULT '',
  `cic_types` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '[]',
  `dispatched_id` varchar(255) NOT NULL DEFAULT '',
  `dispatched_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`id`),
  KEY `fk_cic_requests_applications_idx` (`application_id`),
  KEY `idx_created_at` (`created_at`),
  CONSTRAINT `fk_cic_requests_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=8314 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cic_responses`
--

DROP TABLE IF EXISTS `cic_responses`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `cic_responses` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `cic_type` varchar(31) NOT NULL DEFAULT '',
  `status` varchar(31) NOT NULL DEFAULT '',
  `submitted_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `submitted_by` varchar(63) NOT NULL DEFAULT '',
  `extracted_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '{}',
  `extracted_data_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `requested_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `request_id` bigint(20) NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `response_id` bigint(20) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `idx_created_at` (`created_at`),
  KEY `fk_cic_responses_applications_idx` (`application_id`),
  KEY `idx_request_id` (`request_id`),
  CONSTRAINT `fk_cic_responses_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=12698 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `credit_assignments`
--

DROP TABLE IF EXISTS `credit_assignments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `credit_assignments` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `flow_type` varchar(31) NOT NULL DEFAULT '',
  `credit_limit` float NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `campaign` varchar(127) NOT NULL DEFAULT '',
  `program` varchar(127) NOT NULL DEFAULT '',
  `privacy` varchar(63) NOT NULL DEFAULT '',
  `sub_flow_type` varchar(63) NOT NULL DEFAULT '',
  `flow_info` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `decision_result` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_application_id` (`application_id`)
) ENGINE=InnoDB AUTO_INCREMENT=23633 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `credit_score_requests`
--

DROP TABLE IF EXISTS `credit_score_requests`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `credit_score_requests` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `request_id` bigint(20) NOT NULL DEFAULT 0,
  `telco_code` varchar(63) NOT NULL DEFAULT '',
  `score` varchar(511) NOT NULL DEFAULT '',
  `score_range` varchar(511) NOT NULL DEFAULT '',
  `stats` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '{}',
  `verify` varchar(31) NOT NULL DEFAULT '',
  `plan_code` varchar(63) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `fk_credit_score_requests_application_id_idx` (`application_id`),
  KEY `idx_created_at` (`created_at`),
  CONSTRAINT `fk_credit_score_requests_application_id` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3634 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ekyc_faces`
--

DROP TABLE IF EXISTS `ekyc_faces`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `ekyc_faces` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `selfie_image_uuid` varchar(63) NOT NULL DEFAULT '',
  `selfie_image_url` varchar(2047) NOT NULL DEFAULT '',
  `compare_score` float NOT NULL DEFAULT 0,
  `compare_status` varchar(31) NOT NULL DEFAULT '',
  `compare_request_id` varchar(63) NOT NULL DEFAULT '',
  `liveness_score` float NOT NULL DEFAULT 0,
  `liveness_status` varchar(31) NOT NULL DEFAULT '',
  `liveness_request_id` varchar(63) NOT NULL DEFAULT '',
  `search_face_status` varchar(31) NOT NULL DEFAULT '',
  `search_face_request_id` varchar(63) NOT NULL DEFAULT '',
  `search_face_result` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `process_status` varchar(31) NOT NULL DEFAULT 'pending',
  `processed_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `log` text NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `sanity_check_status` varchar(31) NOT NULL DEFAULT '',
  `sanity_check_score` float NOT NULL DEFAULT 0,
  `sanity_check_result` varchar(127) NOT NULL DEFAULT '',
  `index_request_id` varchar(63) NOT NULL DEFAULT '',
  `index_id_number` varchar(31) NOT NULL DEFAULT '',
  `data_source` varchar(31) NOT NULL DEFAULT '',
  `gesture_images` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `sanity_check_request_id` varchar(63) NOT NULL DEFAULT '',
  `sequence_frames` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_ekyc_face_applications_idx` (`application_id`),
  KEY `eface_img_uuid_idx` (`selfie_image_uuid`),
  CONSTRAINT `fk_ekyc_face_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=10883 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ekyc_ocrs`
--

DROP TABLE IF EXISTS `ekyc_ocrs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `ekyc_ocrs` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `id_front_image_url` varchar(2047) NOT NULL DEFAULT '',
  `id_front_image_uuid` varchar(63) NOT NULL DEFAULT '',
  `id_back_image_url` varchar(2047) NOT NULL DEFAULT '',
  `id_back_image_uuid` varchar(63) NOT NULL DEFAULT '',
  `ocr_request_id` varchar(63) NOT NULL DEFAULT '',
  `id_number` varchar(31) NOT NULL DEFAULT '',
  `name` varchar(255) NOT NULL DEFAULT '',
  `gender` varchar(15) NOT NULL DEFAULT '',
  `birth_date` varchar(31) NOT NULL DEFAULT '',
  `issued_date` varchar(31) NOT NULL DEFAULT '',
  `issued_place` varchar(255) NOT NULL DEFAULT '',
  `native_place` varchar(511) NOT NULL DEFAULT '',
  `address` varchar(511) NOT NULL DEFAULT '',
  `province` varchar(63) NOT NULL DEFAULT '',
  `province_code` varchar(31) NOT NULL DEFAULT '',
  `district` varchar(63) NOT NULL DEFAULT '',
  `district_code` varchar(31) NOT NULL DEFAULT '',
  `ward` varchar(63) NOT NULL DEFAULT '',
  `ward_code` varchar(31) NOT NULL DEFAULT '',
  `card_type` varchar(63) NOT NULL DEFAULT '',
  `expiry_date` varchar(31) NOT NULL DEFAULT '',
  `process_status` varchar(31) NOT NULL DEFAULT '',
  `processed_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `card_info` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `log` text NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `sanity_check_status` varchar(31) NOT NULL DEFAULT '',
  `sanity_check_score` float NOT NULL DEFAULT 0,
  `sanity_check_result` varchar(127) NOT NULL DEFAULT '',
  `data_source` varchar(31) NOT NULL DEFAULT '',
  `search_face_status` varchar(31) NOT NULL DEFAULT '',
  `search_face_request_id` varchar(63) NOT NULL DEFAULT '',
  `search_face_result` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `index_request_id` varchar(63) NOT NULL DEFAULT '',
  `index_id_number` varchar(31) NOT NULL DEFAULT '',
  `address_street` varchar(255) NOT NULL DEFAULT '',
  `sanity_check_request_id` varchar(63) NOT NULL DEFAULT '',
  `qr_code` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `qr1_image_uuid` varchar(63) NOT NULL DEFAULT '',
  `deleted_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_ekyc_ocr_applications_idx` (`application_id`),
  KEY `eocr_front_uuid_idx` (`id_front_image_uuid`),
  KEY `eocr_back_uuid_idx` (`id_back_image_uuid`),
  CONSTRAINT `fk_ekyc_ocr_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=22436 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `eligible_products`
--

DROP TABLE IF EXISTS `eligible_products`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `eligible_products` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `product_code` varchar(63) NOT NULL DEFAULT '',
  `product_type` varchar(63) NOT NULL DEFAULT '',
  `terms` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `idx_application_id` (`application_id`),
  KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1170 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `esigns`
--

DROP TABLE IF EXISTS `esigns`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `esigns` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `request_id` varchar(63) NOT NULL DEFAULT '',
  `filled_fields` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `contract_form` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `form_step` varchar(31) NOT NULL DEFAULT '',
  `status` varchar(31) NOT NULL DEFAULT '',
  `status_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `dispatched_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `deleted_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_esign_applications_idx` (`application_id`),
  CONSTRAINT `fk_esign_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3048 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `extra_services`
--

DROP TABLE IF EXISTS `extra_services`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `extra_services` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `service_type` varchar(31) NOT NULL DEFAULT '',
  `collected_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `status` varchar(31) NOT NULL DEFAULT '',
  `settings` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_phone_number` (`service_type`),
  KEY `fk_extra_services_applications_idx` (`application_id`),
  CONSTRAINT `fk_extra_services_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4650 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `form_histories`
--

DROP TABLE IF EXISTS `form_histories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `form_histories` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `state` varchar(63) NOT NULL DEFAULT '',
  `mismatch` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `old_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_application_id` (`application_id`)
) ENGINE=InnoDB AUTO_INCREMENT=5296 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `fraud_score_requests`
--

DROP TABLE IF EXISTS `fraud_score_requests`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `fraud_score_requests` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `request_id` bigint(20) NOT NULL DEFAULT 0,
  `telco_code` varchar(63) NOT NULL DEFAULT '',
  `score` varchar(511) NOT NULL DEFAULT '',
  `score_version` varchar(31) NOT NULL DEFAULT '',
  `fraud_level` varchar(31) NOT NULL DEFAULT '',
  `stats` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '{}',
  `verify` varchar(31) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `fraud_info` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_fraud_score_requests_applications_idx` (`application_id`),
  KEY `idx_created_at` (`created_at`),
  CONSTRAINT `fk_fraud_score_requests_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3829 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `gift_cards`
--

DROP TABLE IF EXISTS `gift_cards`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `gift_cards` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `link` varchar(2048) NOT NULL DEFAULT '',
  `pin` varchar(63) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `idx_gift_card_application_id` (`application_id`),
  KEY `idx_gift_card_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `id_card_tamperings`
--

DROP TABLE IF EXISTS `id_card_tamperings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `id_card_tamperings` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `id_front_image_uuid` varchar(63) NOT NULL DEFAULT '',
  `id_back_image_uuid` varchar(63) NOT NULL DEFAULT '',
  `id_number` varchar(31) NOT NULL DEFAULT '',
  `verdict` varchar(63) NOT NULL DEFAULT '',
  `score` float NOT NULL DEFAULT 0,
  `log` text NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `details` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `request_id` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `fk_id_card_tamperings_applications_idx` (`application_id`),
  CONSTRAINT `fk_id_card_tamperings_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=8621 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `key_values`
--

DROP TABLE IF EXISTS `key_values`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `key_values` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(511) NOT NULL DEFAULT '',
  `value` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `lender_configs`
--

DROP TABLE IF EXISTS `lender_configs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `lender_configs` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `lender_id` bigint(20) NOT NULL,
  `ui_flow` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `document_schema` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `weight` int(11) NOT NULL DEFAULT 0,
  `lead_expiry` bigint(20) NOT NULL,
  `version` int(11) NOT NULL DEFAULT 0,
  `active` tinyint(4) NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `decision_engines` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `add_on_services` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `ui_flow_settings` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `otp_service` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `lead_offer_expiry` bigint(20) NOT NULL DEFAULT 0,
  `ui_version` varchar(31) NOT NULL DEFAULT '',
  `tags` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `follow_up_sms` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `name` varchar(63) NOT NULL DEFAULT '',
  `auth_settings` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `ekyc_settings` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `domain` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `fk_lender_config_lender_idx` (`lender_id`),
  CONSTRAINT `fk_lender_config_lender` FOREIGN KEY (`lender_id`) REFERENCES `lenders` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=220 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `lender_credentials`
--

DROP TABLE IF EXISTS `lender_credentials`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `lender_credentials` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `lender_id` bigint(20) NOT NULL,
  `user_name` varchar(63) NOT NULL DEFAULT '',
  `encrypted_password` varchar(127) NOT NULL DEFAULT '',
  `active` tinyint(4) NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `service_type` varchar(31) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `fk_lender_credentials_lender_idx` (`lender_id`),
  CONSTRAINT `fk_lender_credentials_lender` FOREIGN KEY (`lender_id`) REFERENCES `lenders` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=25 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `lender_partners`
--

DROP TABLE IF EXISTS `lender_partners`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `lender_partners` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `lender_id` bigint(20) NOT NULL,
  `source` varchar(63) NOT NULL DEFAULT '',
  `presigned_url_template` varchar(256) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `restrictions` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `settings` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `partner_code` varchar(63) NOT NULL DEFAULT '',
  `partner_name` varchar(63) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `lender_id_source_idx` (`lender_id`,`source`),
  CONSTRAINT `fk_lender_partners_lenders` FOREIGN KEY (`lender_id`) REFERENCES `lenders` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=28 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `lenders`
--

DROP TABLE IF EXISTS `lenders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `lenders` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `code` varchar(63) NOT NULL DEFAULT '',
  `name` varchar(255) NOT NULL DEFAULT '',
  `active` tinyint(4) NOT NULL DEFAULT 0,
  `flow_selector` varchar(31) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_unique_code` (`code`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `metadata`
--

DROP TABLE IF EXISTS `metadata`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `metadata` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `type` varchar(45) NOT NULL,
  `name` varchar(250) NOT NULL,
  `lender_code` varchar(45) DEFAULT NULL,
  `code` varchar(45) DEFAULT NULL,
  `parent_type` varchar(45) DEFAULT NULL,
  `parent_code` varchar(45) DEFAULT NULL,
  `lender_id` bigint(20) DEFAULT NULL,
  `uniform` varchar(250) NOT NULL DEFAULT '',
  `level` varchar(45) NOT NULL DEFAULT '',
  `weight` int(11) NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `public_code` varchar(63) NOT NULL DEFAULT '',
  `attributes` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `md_internal_code_unique` (`type`,`lender_id`,`code`),
  KEY `md_type_idx` (`type`),
  KEY `md_name_idx` (`name`),
  KEY `md_code_idx` (`code`),
  KEY `md_parent_type_idx` (`parent_type`),
  KEY `md_parent_code_idx` (`parent_code`),
  KEY `md_lender_idx` (`lender_id`),
  KEY `md_lender_code_idx` (`lender_code`)
) ENGINE=InnoDB AUTO_INCREMENT=51432074 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `offered_products`
--

DROP TABLE IF EXISTS `offered_products`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `offered_products` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `product_code` varchar(63) NOT NULL DEFAULT '',
  `product_type` varchar(63) NOT NULL DEFAULT '',
  `terms` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `idx_application_id` (`application_id`),
  KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1787 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `other_nid_profiles`
--

DROP TABLE IF EXISTS `other_nid_profiles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `other_nid_profiles` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `id_number` varchar(511) NOT NULL DEFAULT '',
  `other_id_number` varchar(511) NOT NULL DEFAULT '',
  `full_name` varchar(63) NOT NULL DEFAULT '',
  `date_of_birth` varchar(15) NOT NULL DEFAULT '',
  `other_province` varchar(31) NOT NULL DEFAULT '',
  `address` varchar(511) NOT NULL DEFAULT '',
  `source` varchar(15) NOT NULL DEFAULT '',
  `request_id` bigint(20) NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `fk_application_idx` (`application_id`),
  KEY `id_number_idx` (`id_number`),
  KEY `created_at_idx` (`created_at`),
  CONSTRAINT `fk_application` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=405 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `otp_sms_requests`
--

DROP TABLE IF EXISTS `otp_sms_requests`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `otp_sms_requests` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `phone_number` varchar(31) NOT NULL DEFAULT '',
  `otp` varchar(15) NOT NULL DEFAULT '',
  `expired_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `verify_status` varchar(31) NOT NULL DEFAULT '',
  `verify_count` int(11) NOT NULL DEFAULT 0,
  `verify_status_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `fk_otp_sms_request_application_idx` (`application_id`),
  CONSTRAINT `fk_otp_sms_request_application` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=11334 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `outbound_sms`
--

DROP TABLE IF EXISTS `outbound_sms`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `outbound_sms` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `phone_number` varchar(25) NOT NULL DEFAULT '',
  `sms_content` varchar(512) NOT NULL DEFAULT '',
  `status` varchar(45) NOT NULL DEFAULT '',
  `type` varchar(45) NOT NULL DEFAULT '',
  `transaction_id` varchar(256) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_unique_key` (`application_id`,`type`,`transaction_id`),
  KEY `fk_outbound_sms_applications_idx` (`application_id`),
  CONSTRAINT `fk_outbound_sms_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=2603 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `phone_owner_profiles`
--

DROP TABLE IF EXISTS `phone_owner_profiles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `phone_owner_profiles` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `full_name` varchar(255) NOT NULL DEFAULT '',
  `date_of_birth` varchar(15) NOT NULL DEFAULT '',
  `phone_number` varchar(511) NOT NULL DEFAULT '',
  `id_number` varchar(511) NOT NULL DEFAULT '',
  `request_id` bigint(20) NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `idx_phone_number` (`phone_number`),
  KEY `created_at` (`created_at`),
  KEY `fk_phone_owner_application_idx` (`application_id`),
  CONSTRAINT `fk_phone_owner_application` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=1959 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `prequalifications`
--

DROP TABLE IF EXISTS `prequalifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `prequalifications` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `id_value` varchar(31) NOT NULL DEFAULT '',
  `phone_number` varchar(31) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `idx_application_id` (`application_id`),
  KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `products`
--

DROP TABLE IF EXISTS `products`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `products` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `lender_id` bigint(20) NOT NULL DEFAULT 0,
  `product_code` varchar(63) NOT NULL DEFAULT '',
  `product_type` varchar(63) NOT NULL DEFAULT '',
  `product_name` varchar(127) NOT NULL DEFAULT '',
  `product_settings` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `product_category` varchar(63) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=33 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `referrals`
--

DROP TABLE IF EXISTS `referrals`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `referrals` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL,
  `phone_number` varchar(31) NOT NULL DEFAULT '',
  `collected_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `idx_phone_number` (`phone_number`),
  KEY `fk_referals_applications_idx` (`application_id`),
  CONSTRAINT `fk_referals_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=84 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `registrations`
--

DROP TABLE IF EXISTS `registrations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `registrations` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `client_code` varchar(63) NOT NULL DEFAULT '',
  `telco_code` varchar(31) NOT NULL DEFAULT '',
  `phone_number` varchar(31) NOT NULL DEFAULT '',
  `product_type` varchar(31) NOT NULL DEFAULT '',
  `product_code` varchar(31) NOT NULL DEFAULT '',
  `external_lead_id` varchar(63) NOT NULL DEFAULT '',
  `collected_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `status` varchar(31) NOT NULL DEFAULT '',
  `source` varchar(31) NOT NULL DEFAULT '',
  `submitted_by` varchar(63) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `reason` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `idx_phone_number` (`phone_number`),
  KEY `idx_client_source` (`client_code`,`source`)
) ENGINE=InnoDB AUTO_INCREMENT=22604 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `risk_grades`
--

DROP TABLE IF EXISTS `risk_grades`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `risk_grades` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `result_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `idx_application_id` (`application_id`)
) ENGINE=InnoDB AUTO_INCREMENT=2215 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `schema_migrations`
--

DROP TABLE IF EXISTS `schema_migrations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `schema_migrations` (
  `version` bigint(20) NOT NULL,
  `dirty` tinyint(1) NOT NULL,
  PRIMARY KEY (`version`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `sent_applications`
--

DROP TABLE IF EXISTS `sent_applications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `sent_applications` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `transaction_id` varchar(128) NOT NULL DEFAULT '',
  `type` varchar(45) NOT NULL,
  `status` varchar(45) NOT NULL,
  `payload` text DEFAULT NULL,
  `retries` int(11) NOT NULL DEFAULT 0,
  `log` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `application_id` bigint(20) NOT NULL,
  `step_tracks` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `sent_app_unique_idx` (`transaction_id`,`type`,`application_id`),
  KEY `fk_sent_applications_applications1_idx` (`application_id`),
  KEY `sent_app_type_idx` (`type`),
  KEY `sent_app_status_idx` (`status`),
  CONSTRAINT `fk_sent_applications_applications1` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=28012 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `si_profiles`
--

DROP TABLE IF EXISTS `si_profiles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `si_profiles` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `full_name` varchar(63) NOT NULL DEFAULT '',
  `date_of_birth` varchar(15) NOT NULL DEFAULT '',
  `id_number` varchar(511) NOT NULL DEFAULT '',
  `si_number` varchar(511) NOT NULL DEFAULT '',
  `last_paid_date` varchar(15) NOT NULL DEFAULT '',
  `salary` bigint(20) NOT NULL DEFAULT 0,
  `company_name` varchar(255) NOT NULL DEFAULT '',
  `application_id` bigint(20) NOT NULL DEFAULT 0,
  `request_id` bigint(20) NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `company_tax_id` varchar(63) NOT NULL DEFAULT '',
  `total_months_at_current_company` int(11) NOT NULL DEFAULT 0,
  `max_consecutive_months` int(11) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `idx_created_at` (`created_at`),
  KEY `fk_si_profiles_applications_idx` (`application_id`),
  KEY `idx_request_id` (`request_id`),
  CONSTRAINT `fk_si_profiles_applications` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=5345 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `users`
--

DROP TABLE IF EXISTS `users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `users` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `phone_number` varchar(31) NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `usr_phone_idx` (`phone_number`)
) ENGINE=InnoDB AUTO_INCREMENT=4157 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2022-06-17 14:09:36
